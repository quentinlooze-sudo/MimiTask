/* ==============================================
   MimiTask — Polish
   Responsive, animations, a11y, edge cases
   ============================================== */

/* --- Responsive --- */

/* Desktop : contenu centré, largeur mobile */
@media (min-width: 768px) {
  main { max-width: 540px; margin: 0 auto; }
  .tab-bar { max-width: 540px; left: 50%; transform: translateX(-50%); border-radius: var(--radius-lg) var(--radius-lg) 0 0; }
  .toast-container { max-width: 540px; }
  .mascot__pet { width: 150px; }
  .dashboard { padding: var(--space-lg) var(--space-lg) var(--space-2xl); }
}
@media (min-width: 1024px) {
  main { max-width: 480px; }
  .tab-bar { max-width: 480px; }
  .toast-container { max-width: 480px; }
}

/* --- Boutons hover/active --- */
.btn--primary:active { transform: scale(0.97); }
.btn--primary:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
.btn--secondary:active { background-color: rgba(45, 106, 79, 0.08); }
.btn--ghost:active { background-color: rgba(0, 0, 0, 0.05); }
.tab-bar__item:active { transform: scale(0.92); }

@media (hover: hover) {
  .btn--primary:hover { transform: translateY(-2px); box-shadow: 0 6px 24px rgba(45, 106, 79, 0.4); }
  .btn--secondary:hover { background-color: rgba(45, 106, 79, 0.05); }
  .btn--ghost:hover { color: var(--color-text); }
  .task-card__delegate:hover { color: var(--color-primary); }
  .reward-card__delete:hover { color: var(--color-error); }
}

/* --- Check animation (validation tâche) --- */
@keyframes check-bounce {
  0% { transform: scale(0); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1.1); }
}
.task-card__check--just-checked {
  animation: check-bounce 0.4s var(--ease-spring);
}

/* --- Confetti CSS (validation + reward) --- */
@keyframes confetti-fall {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(120px) rotate(720deg); opacity: 0; }
}
.confetti-piece {
  position: absolute;
  width: 8px; height: 8px; border-radius: 2px;
  animation: confetti-fall 1s ease-out forwards;
  z-index: 200; pointer-events: none;
}

/* --- Toast info type --- */
.toast--info { border-left: none; }

/* --- Noms longs : ellipsis --- */
.task-card__name,
.reward-card__name,
.score-card__label,
.balance__label,
.streak__count {
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.task-card__name { max-width: 160px; }
.reward-card__name { max-width: 180px; }

/* --- Reduced motion --- */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms;
    transition-duration: 0.01ms;
  }
}
